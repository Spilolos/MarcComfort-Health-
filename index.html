<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>eClinic — Online Appointments & Doctor Chat</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:," />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <div class="logo">eC</div>
        <div class="brand-text">
          <h1>eClinic</h1>
          <small>Appointments & Doctor Chat</small>
        </div>
      </div>
      <nav class="nav">
        <button class="nav-link" data-view="home">Home</button>
        <button class="nav-link" data-view="doctors">Doctors</button>
        <button class="nav-link" data-view="appointments">Appointments</button>
        <button class="nav-link" data-view="chat">Chat</button>
      </nav>
      <div class="userbox">
        <div id="userBadge" class="badge hidden"></div>
        <button id="authBtn" class="btn btn-secondary">Sign in</button>
        <button id="logoutBtn" class="btn btn-ghost hidden">Logout</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Auth card (login/signup) -->
    <section id="authCard" class="card auth-card hidden">
      <div class="tabs">
        <button class="tab active" data-tab="login">Login</button>
        <button class="tab" data-tab="signup">Sign up</button>
      </div>
      <div class="tab-content">
        <form id="loginForm" class="form-grid" data-panel="login">
          <div class="form-row"><label>Email</label><input type="email" id="loginEmail" required /></div>
          <div class="form-row"><label>Password</label><input type="password" id="loginPassword" required /></div>
          <div class="form-row inline">
            <label class="checkbox"><input id="rememberMe" type="checkbox" /> Remember me</label>
          </div>
          <button class="btn btn-primary" type="submit">Login</button>
        </form>
        <form id="signupForm" class="form-grid hidden" data-panel="signup">
          <div class="form-row"><label>Full name</label><input id="signupName" required /></div>
          <div class="form-row"><label>Email</label><input type="email" id="signupEmail" required /></div>
          <div class="form-row"><label>Password</label><input type="password" id="signupPassword" minlength="6" required /></div>
          <div class="form-row"><label>Role</label>
            <select id="signupRole">
              <option value="patient">Patient</option>
              <option value="doctor">Doctor</option>
            </select>
          </div>
          <button class="btn btn-primary" type="submit">Create account</button>
        </form>
      </div>
    </section>

    <!-- Home -->
    <section id="view-home" class="view active">
      <div class="grid-2">
        <div class="card">
          <h2>Welcome to eClinic</h2>
          <p>Book appointments, chat with doctors, and validate clinic addresses — all in your browser.</p>
          <ul class="list">
            <li>Auth (sign up / login / remember me)</li>
            <li>CRUD for Doctors & Appointments</li>
            <li>Per-appointment chat</li>
            <li>Third-party API: OSM Nominatim geocoding</li>
          </ul>
        </div>
        <div class="card">
          <h3>Quick actions</h3>
          <div class="quick-actions">
            <button class="btn btn-primary" data-view="doctors">Find/Add Doctors</button>
            <button class="btn btn-secondary" data-view="appointments">Book Appointment</button>
            <button class="btn btn-ghost" data-view="chat">Open Chat</button>
          </div>
          <div id="profileCard" class="profile hidden">
            <h4>My Profile</h4>
            <div><span class="muted">Name:</span> <span id="profName">—</span></div>
            <div><span class="muted">Email:</span> <span id="profEmail">—</span></div>
            <div><span class="muted">Role:</span> <span id="profRole">—</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Doctors -->
    <section id="view-doctors" class="view">
      <div class="card">
        <div class="toolbar">
          <h2>Doctors</h2>
          <input id="docSearch" type="search" placeholder="Search by name or specialty…" />
        </div>
        <div id="doctorList" class="cards-grid"></div>
        <div class="muted mt-8">Only the creator can edit/delete a doctor profile.</div>
      </div>

      <div class="card">
        <h3>Add / Edit Doctor (Doctor role)</h3>
        <form id="doctorForm" class="form-grid">
          <input type="hidden" id="doctorId" />
          <div class="form-row"><label>Full name</label><input id="doctorName" required /></div>
          <div class="form-row"><label>Specialty</label><input id="doctorSpecialty" placeholder="e.g., Pediatrics" /></div>
          <div class="form-row"><label>Clinic Address</label><input id="doctorAddress" placeholder="Street, City, Country" /></div>
          <div class="form-row inline">
            <button type="button" id="geocodeBtn" class="btn btn-secondary">Validate address</button>
            <span id="geocodeResult" class="muted"></span>
          </div>
          <button class="btn btn-primary" type="submit">Save Doctor</button>
          <button class="btn btn-ghost" type="button" id="resetDocForm">Reset</button>
        </form>
      </div>
    </section>

    <!-- Appointments -->
    <section id="view-appointments" class="view">
      <div class="card">
        <div class="toolbar">
          <h2>My Appointments</h2>
          <div id="apptRoleNote" class="muted"></div>
        </div>
        <div id="apptList" class="cards-list"></div>
      </div>

      <div class="card">
        <h3>Book an Appointment (Patient role)</h3>
        <form id="apptForm" class="form-grid">
          <div class="form-row"><label>Doctor</label><select id="apptDoctor"></select></div>
          <div class="form-row"><label>Date</label><input id="apptDate" type="date" required /></div>
          <div class="form-row"><label>Time</label><input id="apptTime" type="time" required /></div>
          <div class="form-row"><label>Reason</label><input id="apptReason" placeholder="Optional" /></div>
          <button class="btn btn-primary" type="submit">Book</button>
        </form>
      </div>
    </section>

    <!-- Chat -->
    <section id="view-chat" class="view">
      <div class="card">
        <h2>Chat</h2>
        <p class="muted">Pick an appointment to open a shared message thread.</p>
        <div class="form-row"><label>Appointment</label><select id="chatAppt"></select></div>
        <div id="chatBox" class="chat-box">
          <div id="chatStream" class="chat-stream"></div>
          <form id="chatForm" class="chat-input">
            <input id="chatText" placeholder="Type a message…" />
            <button class="btn btn-primary" type="submit">Send</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>©️ <span id="year"></span> eClinic</div>
      <div class="links">
        <a href="#" data-view="home">Home</a>
        <a href="#" data-view="doctors">Doctors</a>
        <a href="#" data-view="appointments">Appointments</a>
        <a href="#" data-view="chat">Chat</a>
      </div>
    </div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
